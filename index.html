<!DOCTYPE html>
<html>
<head>
	<title>BAZAR VINTAGE | Blog</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="css/estilo2.css">
	<link rel="stylesheet" href="css/estilos.css">
    <link rel="manifest" href="manifest.json">
    
    <script type="text/javascript" src="js/jquery.js"></script>
	<link rel="icon" type="image/x-icon" href="/img/icon.png">
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
</head>
<body>
	<header class="header" id="inicio">
	<div class="container logo-nav-container">
	<nav class="menu-navegacion">
		<ul>
		<li><a href="#ventainter">Venta Internacional</a></li>
		<li><a href="#servicio">Servicio</a></li>
		<li><a href="#portafolio">Portafolio</a></li>
		<li><a href="#expertos">Expertos</a></li>
		<li><a href="#contacto">Contacto</a></li>
		</ul>
	</nav>
	</div>
	<div class="contenedor head">
		<h1 class="titulo">BAZAR VINTAGE</h1>
		<p class="copy">Accesorios en tu decoracion para que des tu toque en tu espacio.</p>
	</div>
</header>
<main>
	<section class="contenedor" id="servicio">
		<h2 class="subtitulo">CONOCE NUESTRO BLOG</h2>
		<div class="contenedor-servicio">
			<img src="img/ilustracion1.png" alt="">
			<div class="checklist-servicio">
				<div class="service">
					<h3 class="n-service"><span class="number">1</span>Online.</h3>
					<p>Así de fácil es comprar tus muebles online de manera rápida y cómoda desde tu hogar. </p>
				</div>
				<div class="service">
					<h3 class="n-service"><span class="number">2</span>Con nosotros encontraras.</h3>
					<p> Gran variedad y estilos en salas, sillones, sofás, recámaras, sofás cama, mesas, sillas, muebles de TV, accesorios y muchos muebles más para tu hogar.</p>
				</div>
				<div class="service">
					<h3 class="n-service"><span class="number">3</span>Como TU lo quieres.</h3>
					<p> Solo elige el modelo, estilo, material y color.</p>
				</div>
			</div>
		</div>
	</section>
	<section class="gallery" id="portafolio">
		<div class="contenedor">
			<h2 class="subtitulo">COLECCIONES</h2>
			<div class="contenedor-galeria">
				<img src="img/mueble1.jpg" alt="" class="img-galeria">
				<img src="img/mueble2.jpg" alt="" class="img-galeria">
				<img src="img/mueble3.jpg" alt="" class="img-galeria">
				<img src="img/mueble4.jpg" alt="" class="img-galeria">
				<img src="img/mueble6.jpg" alt="" class="img-galeria">
				<img src="img/mueble5.jpg" alt="" class="img-galeria">
			</div>
		</div>
	</section>
	<section class="imagen-light">
		<img src="img/icon2.png" alt="" class="close">
		<img src="img/ilustracion4.png" alt="" class="agregar-imagen">
	</section> 
	<section class="contenedor" id="expertos">
		<h2 class="subtitulo">TODO DISEÑADO PARA TI
</h2>
		<section class="experts">
			<div class="cont-expert">
			<img src="img/ilustracion3.png" alt="">
			<h3 class="n-expert">Tenemos el proceso de compra mas sencillo que puedas imaginar, sin costos extras ni sorpresas.</h3>
			</div>
			<div class="cont-expert">
			<img src="img/ilustracion4.png" alt="">
			<h3 class="n-expert">Tenemos un amplio catalogo de productos de la mejor calidad, pensados para darle el mejor estilo a tu espacio.</h3>
			</div>
			<div class="cont-expert">
			<img src="img/ilustracion5.png" alt="">
			<h3 class="n-expert">Te mandamos todo hasta tu casa para que no tengas que salir de ella.</h3>
			</div>
		</section>
	</section>
	<h2 class="subtitulo"> AQUI TU PUEDES VENDER </h2>
<div class="container" id="ventainter">
<div class="row">
<form>
<fieldset>
<legend> Producto a vender </legend>
<input  type="text" class="form-control" id="item" />
<br />
<legend> ¿Que precio le pones? </legend>
<input type="number" step="0.01" class="form-control" id="precio" />
<br />
<button class="boton azul" type="button" id="crear" class="btn btn-success">Crear Tabla </button>
<button class="boton azul" type="button" id="insertar" class="btn btn-success">Insertar Registro </button>
<button class="boton verde" type="button" id="modificar" class="btn btn-danger">Modificar Registro </button>
<button class="boton verde" type="button" id="listar" class="btn btn-success">Actualizar </button>
<button class="boton rojo" type="button" id="borrarTodo" class="btn btn-danger">ELIMINAR TODO </button>
</fieldset>
</form>
<hr />

<center><table class="table table-borderer table-hover" id="listaProductos" style="width:715px">

</table></center>
</div>

</div>
</main>
 
	<footer>
        <div class="contenedor-footer" id="contacto">
            <div class="content-foo">
                <h4>Telefono</h4>
                <p>8421162366</p>
            </div>
            <div class="content-foo">
                <h4>Ubicacion</h4>
                <p>Av. Industria Metalúrgica # 2001

         Parque Industrial Ramos Arizpe Coah.</p>
            </div>
            <div class="content-foo">
                <h4>Email</h4>
                <p>bazar_vintage@gmail.com</p>
            </div>
            
        </div>
        <h2 class="titulo-final">&copy; Univesidad Tecnologica de Coahuila | Carolina Quiñones</h2>
    </footer>

		
	<script type="text/javascript">
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/js/sw.js");
  }
</script>




<script type="text/javascript">var nuevoId;
var db=openDatabase("itemDB","1.0","itemDB", 65535)

function limpiar(){
	document.getElementById("item").value="";
	document.getElementById("precio").value="";
}

//Funcionalidad de los botones
//Eliminar Registro
function eliminarRegistro(){
	$(document).one('click','button[type="button"]', function(event){
		let id=this.id;
		var lista=[];
		$("#listaProductos").each(function(){
			var celdas=$(this).find('tr.Reg_'+id);
			celdas.each(function(){
				var registro=$(this).find('span.mid');
				registro.each(function(){
					lista.push($(this).html())
				});
			});
		});
		nuevoId=lista[0].substr(1);
		//alert(nuevoId);
		db.transaction(function(transaction){
			var sql="DELETE FROM productos WHERE id="+nuevoId+";"
			transaction.executeSql(sql,undefined,function(){
				alert("Registro borrado satisfactoriamente, Por favor actualice la tabla")
			}, function(transaction, err){
				alert(err.message);
			})
		})
	});
}



//Editar registro
function editar(){
		$(document).one('click','button[type="button"]', function(event){
		let id=this.id;
		var lista=[];
		$("#listaProductos").each(function(){
			var celdas=$(this).find('tr.Reg_'+id);
			celdas.each(function(){
				var registro=$(this).find('span');
				registro.each(function(){
					lista.push($(this).html())
				});
			});
		});
		document.getElementById("item").value=lista[1];
		document.getElementById("precio").value=lista[2].slice(0,-5);
		nuevoId=lista[0].substr(1);
})
}


$(function (){
// crear la tabla de productos
$("#crear").click(function(){
	db.transaction(function(transaction){
		var sql="CREATE TABLE productos "+
		"(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, "+
		"item VARCHAR(100) NOT NULL, "+
		"precio DECIMAL(5,2) NOT NULL)";
		transaction.executeSql(sql,undefined, function(){
			alert("Tabla creada satisfactoriamente");
		}, function(transaction, err){
			alert(err.message);
		})
		});
	});

//Cargar la lista de productos
$("#listar").click(function(){
	cargarDatos();
})

//Funcion para listar y pintar tabla de productos en la página web
function cargarDatos(){
	$("#listaProductos").children().remove();
	db.transaction(function(transaction){
		var sql="SELECT * FROM productos ORDER BY id DESC";
		transaction.executeSql(sql,undefined, function(transaction,result){
			if(result.rows.length){
				$("#listaProductos").append('<tr><th>Código</th><th>Producto</th><th>Precio</th><th></th><th></th></tr>');
				for(var i=0; i<result.rows.length; i++){
					var row=result.rows.item(i);
					var item=row.item;
					var id =row.id;
					var precio=row.precio;
					$("#listaProductos").append('<tr id="fila'+id+'" class="Reg_A'+id+'"><td><span class="mid">A'+
					id+'</span></td><td><span>'+item+'</span></td><td><span>'+
					precio+' MXN$</span></td><td><button type="button" id="A'+id+'" class="btn btn-success" onclick="editar()">edit</button></td><td><button type="button" id="A'+id+'" class="btn btn-danger" onclick="eliminarRegistro()">delete</button></td></tr>');
				}
			}else{
				$("#listaProductos").append('<tr><td colspan="5" align="center">No existen registros de productos</td></tr>');
			}
			},function(transaction, err){
				alert(err.message);
			})
		})
		
	}

//insertar registros
$("#insertar").click(function(){
	var item=$("#item").val();
	var precio=$("#precio").val();
	db.transaction(function(transaction){
		var sql="INSERT INTO productos(item,precio) VALUES(?,?)";
		transaction.executeSql(sql,[item,precio],function(){			
		}, function(transaction, err){
			alert(err.message);
		})
	})
		limpiar();
		cargarDatos();
	})

//Modificar un registro
$("#modificar").click(function(){
	var nprod=$("#item").val();
	var nprecio=$("#precio").val();
	
	db.transaction(function(transaction){
		var sql="UPDATE productos SET item='"+nprod+"', precio='"+nprecio+"' WHERE id="+nuevoId+";"
		transaction.executeSql(sql,undefined,function(){
			cargarDatos();
			limpiar();
		}, function(transaction, err){
			alert(err.message)
		})
	})
})

// Para borrar toda la lista de Registros
$("#borrarTodo").click(function(){
	if(!confirm("Está seguro de borrar la tabla?, los datos se perderán permanentemente",""))
		return;
	db.transaction(function(transaction){
		var sql="DROP TABLE productos";
		transaction.executeSql(sql,undefined,function(){
			alert("Tabla borrada satisfactoriamente, Por favor, actualice la página")
		}, function(transaction, err){
			alert(err.message);
		})
	})
})




})</script>
</body>
</html>